auto_select_max_threshold: 100
auto_select_min_threshold: 10
commands:
  ff_tab:
    display: "ğŸŒ Open in Firefox Tab"
    command: firefox --new-tab "$TEXT"
  ff_window:
    display: "ğŸ—” Open in New Firefox Window"
    command: firefox --new-window "$TEXT"
  tsp_ytdlp:
    display: "â¬‡ï¸ Download with tsp_ytdlp"
    command: tsp_ytdlp "$TEXT"
  tsp_ytdlp_batch:
    display: "â¬‡ï¸ Batch Download with tsp_ytdlp"
    command: 'echo "$TEXT" | while IFS= read -r url; do [ -n "$url" ] && tsp_ytdlp "$url"; done'
  gallery-dl:
    display: "ğŸ–¼ï¸ Download with gallery-dl"
    command: stcmd "gallery-dl $TEXT"
  rss:
    display: "ğŸ“° Add as newsboat feed"
    command: echo "$TEXT" >> ~/.config/newsboat/urls && notify-send "Added feed to newsboat"
  watch_mpv:
    display: "ğŸ¬ Watch video in mpv"
    command: stcmd "mpv $TEXT"
  magnet_link:
    display: "ğŸ´â€â˜ ï¸ Add torrent"
    command: ~/.config/dotfiles/handlers/magnet_link_handler.sh "$TEXT"
  xdg-open:
    display: "ğŸ“„ Open file with xdg-open"
    command: xdg-open "$TEXT"
  st_dir:
    display: "ğŸ“‚ Open directory in terminal"
    command: 'TEXT="${TEXT/#~/$HOME}" && [ -d "$TEXT" ] && st -e sh -c "cd \"$TEXT\" && exec \$SHELL" || st -e sh -c "cd \"$(dirname \"$TEXT\")\" && exec \$SHELL"'
  pcmanfm_dir:
    display: "ğŸ“‚ Open directory in file manager"
    command: 'TEXT="${TEXT/#~/$HOME}" && [ -d "$TEXT" ] && pcmanfm "$TEXT" || pcmanfm "$(dirname "$TEXT")"'
  nvim:
    display: "ğŸ“ Open in Nvim"
    command: stcmd "printf '%s' \"$TEXT\" | nvim -; exit"
  dragon_drop:
    display: "ğŸ² Dragon drop"
    command: 'TEXT="${TEXT/#~/$HOME}" && if [ -d "$TEXT" ]; then dragon-drag-and-drop "$TEXT"/*; else dragon-drag-and-drop "$TEXT"; fi'
  qr_code:
    display: "ğŸ“¸ Generate QR code"
    command: qrencode -t PNG -o /tmp/qr.png "$TEXT" && feh /tmp/qr.png && rm /tmp/qr.png
  dragon_drop_image:
    display: "ğŸ²ğŸ–¼ï¸ Dragon drop image"
    command: |
      cp "$DATA_FILE" /tmp/text_handler_image.png
      dragon-drag-and-drop /tmp/text_handler_image.png


scorers:
  - regex: '^https?://.*'
    command_label: ff_tab
    score_change: 11
  - regex: '^https?://.*'
    command_label: tsp_ytdlp
    score_change: 1
  - regex: '^(?:https?://.*(?:\n|$))+$'
    command_label: tsp_ytdlp_batch
    score_change: 30
  - regex: '^https?://.*'
    command_label: ff_window
    score_change: 10
  - regex: 'youtube\.com|youtu\.be|twitch\.tv'
    command_label: tsp_ytdlp
    score_change: 20
  - regex: 'instagram\.com|twitter\.com|x\.com'
    command_label: gallery-dl
    score_change: 20
  - regex: '\.rss$|feeds\.xml|/feed'
    command_label: rss
    score_change: 25
  - regex: '^magnet:\?'
    command_label: magnet_link
    score_change: 150
  - regex: '\.(txt|md|rs|py|js|html|css)$'
    command_label: xdg-open
    score_change: 20
  - regex: '\S'
    score_change: 1
    command_label: nvim
  - regex: ^https?://www\.youtube\.com/watch
    command_label: tsp_ytdlp
    score_change: 10
  - regex: '^\S+$'
    command_label: qr_code
    score_change: 5
  - regex: '^/.*'
    command_label: qr_code
    score_change: -100
  - regex: '^https?://.*'
    command_label: qr_code
    score_change: -100
  - regex: '^magnet:\?'
    command_label: qr_code
    score_change: -100
  - regex: '^~/([^/\s]*/?)*$'
    command_label: st_dir
    score_change: 10
  - regex: '^~/([^/\s]*/?)*$'
    command_label: pcmanfm_dir
    score_change: 10
  - regex: '^(/[^/\s]*)+/?$'
    command_label: st_dir
    score_change: 5
  - regex: '^(/[^/\s]*)+/?$'
    command_label: pcmanfm_dir
    score_change: 5
  - regex: '^(/[^/\s]*)+/?$'
    command_label: dragon_drop
    score_change: 5
  - regex: '^~/([^/\s]*/?)*$'
    command_label: dragon_drop
    score_change: 5
  - regex: '^ï¿½PNG'
    command_label: dragon_drop_image
    score_change: 25
    for_binary_data: true
